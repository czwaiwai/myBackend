<% layout('layout/layout') %>
<% block('header').append(`<style>
.shop_cart_wrap {
    width:100%;
    height:600px;
    border:1px solid #e3e3e3;
    background:#FFF;
}
.no_cart {
    padding-top:120px;
    text-align:center;
       color: #989898;
}
.no_cart .icon-cart {
    font-size:46px;
    color: #989898;
}
.section_no_padding {
padding:0;
margin-bottom:20px;
}
.section_title {
    background:#f5f5f5;
    border-bottom:1px solid #e5e5e5;
    height:42px;
    line-height:42px;
    padding-left:20px;
    font-size:14px;
}
.section_footer {
    background:#f5f5f5;
    border-top:1px solid #e5e5e5;
    height: 49px;
    line-height: 44px;
    padding-left:20px;
    font-size:16px;
}
.order_item + .order_item {
    border-top:1px dashed #e3e3e3;
}

</style>`) %>
<div class="container">
    <div class="row">
        <% if(!user){ %>
            <div class="shop_cart_wrap">
                <div class="no_cart">
                    <i class="iconfont icon-cart"></i>
                    <p class="fs14">你还没有添加任何商品哦</p>
                    <a href="/login" class="btn btn-default">立即登录</a>
                    <a href="/" class="btn btn-primary">去逛逛</a>
                </div>
            </div>
        <% } else if(user && user.cart.length===0 ) { %>
            <div class="shop_cart_wrap">
                <div class="no_cart">
                    <i class="iconfont icon-cart"></i>
                    <p class="fs14">你还没有添加任何商品哦</p>
                    <a href="/" class="btn btn-primary">去逛逛</a>
                </div>
            </div>
        <% } else { %>
        <div class="section section_no_padding" >
            <div class="section_title" >
                <div class="col-xs-4 col-md-4">商品信息</div>
                <div class="col-xs-2 col-md-2 text-center">单价</div>
                <div class="col-xs-2 col-md-2  text-center">数量</div>
                <div class="col-xs-2 col-md-2  text-center">小计</div>
                <div class="col-xs-2 col-md-2 text-center">实付</div>
            </div>
            <div class="padding15-h ">
              <% carts.forEach(function(item){ %>
                <div class="row fs16 padding-v order_item">
                    <div class="col-xs-4  col-md-4">
                        <div class="row">
                            <div class="col-md-2 col-xs-2"><input type="checkbox"></div>
                            <div class="col-md-4 col-xs-4 no-padding" >
                                <img src="<%=item.imgUrl%>" style="width:100px;height:100px;" >
                            </div>
                            <div class="col-md-6  col-xs-6">
                                <p class="fs16"><%=item.goodsName %></p>
                                <p class="text-muted"></p>
                            </div>
                        </div>
                    </div>
                    <div class="col-xs-2 col-md-2  text-center ">￥<%=item.price %></div>
                    <div class="col-xs-2 col-md-2  text-center">
                        <div class="spinner">
                            <input name="num" style="width:55px;" type="text" value="<%=item.goodsNum %>" >
                        </div>
                    </div>
                    <div class="col-xs-2 col-md-2  text-center">￥<%=item.subTotal %></div>
                    <div class="col-xs-2 col-md-2  text-center">￥<%=item.payTotal %></div>
                </div>
              <% }) %>
            </div>
            <div class="section_footer" >
                <div class="col-xs-5 col-md-5" style="padding-left:0;"><label><input type="checkbox" name="checkAll" value=""> 全选</label></div>
                <div class="col-xs-5 col-md-5 text-right"><span class="padding-right fs16" style="color:#989898;">商品合计：￥<%=total %></span><span class="fs16"><strong>应付总额：</strong><span class="text-danger fs22">￥<%=total %></span></span></div>
                <div class="col-xs-2 col-md-2" style="padding-right:0;"><button class="btn btn-primary btn-lg btn-block" style="height: 48px;">下单</button></div>
            </div>
        </div>
        <% } %>
    </div>
</div>
<% block('footer').append(`<script src="/js/spinner.js" ></script>`); %>
<% block('footer').append(`<script id="tpl">

</script>`) %>
<% block('footer').append(`<script>
jQuery(function(){
	var carts = ${JSON.stringify(carts)}
	$(".spinner").Spinner({
	  callback:function(num){
	  	console.log(this)
	  	console.log(num)
	  }
	});

})
</script>`) %>